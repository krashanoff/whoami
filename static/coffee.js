const coffee = {
  "petrichor": {
    "name": "Petrichor Bakery and Cafe (Shinjuku Station)",
    "visited": "2024 (before social)",
    "notes": "Acceptable coffee. Cafe au lait.",
    "score": 3,
    lnglat: [139.6984085,35.6885953],
    "link": "https://maps.app.goo.gl/UMtHbfeZAt5uyQzZ7"
  },
  "social": {
    "name": "Social Good Roasters (Ueno)",
    "visited": "2024 (after petrichor)",
    "notes": "The coffee here is lowkey peak. Oat milk latte.",
    "score": 5,
    lnglat: [139.7714996,35.7136074],
    "link": "https://maps.app.goo.gl/oQMS9uc2DUiHNjKC9"
  },
  "happyscience": {
    "name": "Happy Science Ginza Book Cafe",
    "visited": "15 March 2025",
    "notes": "Reasonable coffee, cute latte art, and kind staff. Latte. Weird relationship to the Happy Science cult.",
    "score": 3,
    "link": "https://maps.app.goo.gl/9HkmQtdhCrDDseaLA",
    lnglat: [139.7631822,35.674814],
    "second_floor": "Y"
  },
  "saza_tsukuba": {
    "name": "SAZA COFFEE",
    "visited": "16 March 2025",
    "score": 4,
    "notes": "Visited during a big rainstorm. Very cute and cozy joint. Lots of options on beans. They even had choices for which beans to use for the latte - wow!",
    lnglat: [140.1117913,36.0819195],
    "link": "https://maps.app.goo.gl/tF3bcPxyXZzgF7JT9"
  },
  "pensta": {
    "name": "Pensta エキュート上野店 Cafe Area",
    "visited": "17 March 2025",
    "score": 1,
    "notes": "Tasted like airport coffee. Pancakes were good. Black coffee.",
    lnglat: [139.7747538,35.7133813],
    "link": "https://maps.app.goo.gl/TPdopRoNdjbdkUcbA"
  },
  "sb_sw": {
    "name": "Starbucks Jingu Stadium",
    "visited": "18 March 2025",
    "elevation": "2F",
    "notes": "Got a matcha latte before the Tokyo Swallows game. It was good.",
    lnglat: [139.7117676,35.6740613],
    "link": "https://maps.app.goo.gl/HQZxjKysenUkEC3m9"
  },
  "yamayu": {
    "name": "Sincere Garden Cafe",
    "visited": "18 March 2025",
    "notes": "Only had vegan stuff, soy latte. Was not very good. Soy latte.",
    "score": 2,
    "elevation": "1F",
    "link": "https://maps.app.goo.gl/xrSoLRWM9VDKecnh7",
    lnglat: [139.7089278,35.6659589],
    "second_floor": "Y"
  },
  "goodcoffeefarms": {
    "name": "Good Coffee Farms Cafe & Bar",
    "score": 3,
    "visited": "19 March 2025",
    "notes": "Owner seemed to have spent time in the states; everyone there was English-speaking. Mocha was pretty good.",
    lnglat: [139.7717488,35.6811428],
    "link": "https://maps.app.goo.gl/mzBZ196aX2ymZj7E9"
  },
  "shigeno": {
    "name": "Shigeno Coffee Craft",
    "visited": "20 March 2025",
    "elevation": "1F",
    "score": 5,
    "notes": "GOAT. Got a cafe au lait. Hand roasted single-source coffee, handmade desserts. Only ~5 seats.",
    lnglat: [139.8102073,35.7092954],
    "link": "https://maps.app.goo.gl/iaSEMXuRJD1g8uGE7"
  },
  "elk": {
    "name": "エルク",
    "visited": "24 March 2025",
    "score": 1,
    "notes": "Bad coffee. Watered down. Bad service, were extremely rude on entry. Pancakes were good. Cafe au lait.",
    lnglat: [135.495451,34.673954],
    "link": "https://maps.app.goo.gl/Pp54bvGQDndCLwSM6"
  },
  "lilo": {
    "name": "LiLo Coffee Roasters",
    "visited": "24 March 2025",
    "score": 5,
    "notes": "Crazy popular. Line out the door well before opening - activity well into the night. Got a trading card of my barista, Ibuki. Single-origin options. Cafe mocha.",
    lnglat: [135.4941749,34.6735184],
    "link": "https://maps.app.goo.gl/LQ6X5LGw66Xdw5bG8"
  },
  "maze": {
    "name": "maZe",
    "score": 4,
    "notes": "Super friendly staff. Had single-origin coffee options and pretty good food. Latte.",
    "visited": "26 March 2025",
    lnglat: [135.4941749,34.6735184],
    "link": "https://maps.app.goo.gl/sf1w8eyTLpxfQqS96"
  },
  "obscura": {
    "name": "OBSCURA COFFEE ROASTERS",
    "score": 2,
    "notes": "OK coffee. Not bad, not particularly good. Just OK.",
    "visited": "27 March 2025",
    lnglat: [132.4822761,34.3986607],
    "link": "https://maps.app.goo.gl/1ADuXbEbtvwk4hQz7"
  },
  "kaiyufuin": {
    "name": "KAI Yufuin",
    "score": 3,
    "notes": "Tasty. Ordinary coffee.",
    "visited": "31 March 2025",
    lnglat: [131.3489769,33.2787825],
    "link": "https://maps.app.goo.gl/CLXXzhWG9B8d44fPA"
  },
  "snoopy": {
    "name": "Snoopy Cafe Yufuin",
    "score": 2,
    "notes": "Unremarkable flavor notes but the Snoopy marshmallow was cute.",
    "visited": "31 March 2025",
    lnglat: [131.3631382,33.2668612],
    "link": "https://maps.app.goo.gl/SSgxxZGQAPCPpDiG8"
  },
  "frontier_club": {
    "name": "Frontier Club Waseda",
    "visited": "1 April 2025",
    "score": 2,
    "notes": "Mediocre coffee but they've got espresso and it kinda hits honestly.",
    "second_floor": "Y",
    lnglat: [139.7198662,35.7081024],
    "link": "https://maps.app.goo.gl/M7LtooGgeugJo7V59"
  },
  "oka808": {
    "name": "OKA808",
    "score": 4,
    "notes": "Incredible flavor from black Kona coffee. I'm not ordinarily a black coffee drinker but this was great.",
    "visited": "3 April 2025",
    lnglat: [139.7198014,35.7121028],
    "link": "https://maps.app.goo.gl/77pWXEMQNTh3gCrc9"
  },
  "akha_ama": {
    "name": "AKHA AMA COFFEE ROASTERY",
    "score": 4,
    "notes": "Thai beans from a _specific region_ of Thailand. Delicious latte and they had good scones too!",
    "visited": "7 April 2025",
    "link": "https://maps.app.goo.gl/U2uWNEfBrp5Pv3D86",
    lnglat: [139.721761,35.70869561],
    "second_floor": "Y"
  },
  "takata_bokusya": {
    "name": "Pizzeria Takata Bokusya",
    "visited": "10 April 2025",
    "score": 2,
    "notes": "Passable, decent coffee. Black coffee.",
    lnglat: [139.7184756,35.7078914],
    "link": "https://maps.app.goo.gl/rvtAizwgrQt3BNgM6"
  },
  "incredible_coffee": {
    "name": "INCredible COFFEE (Shinbashi)",
    "visited": "11 April 2025",
    "score": 4,
    "notes": "Roast their own beans in house daily. Chill vibes but it's just a little stand, no seating.",
    lnglat: [139.7515644,35.6680317],
    "link": "https://maps.app.goo.gl/JFyCDvkQ1D6uyLP97"
  },
  "mitisirube": {
    "name": "Michishirube Cafe",
    "score": 3,
    "notes": "Middle-of-the-pack latte. They offer divination and fortune-telling as part of their services.",
    "visited": "12 April 2025",
    lnglat: [139.6980698,35.7139022],
    "link": "https://maps.app.goo.gl/ZD9FeATpuTe2Lstw5"
  },
  "starbucks_shibuya": {
    "name": "Starbucks (Shibuya Scramble Crossing)",
    "score": 2,
    "notes": "Ordinary matcha latte. Views are good. I did not take a photo.",
    "visited": "13 April 2025",
    "link": "https://maps.app.goo.gl/kyCFNVZzYVQueZR26",
    lnglat: [139.6997168,35.6595457],
    "second_floor": "Y"
  },
  "mister_donut": {
    "name": "Mister Donut Takadanobaba",
    "visited": "16 April 2025",
    "notes": "Mediocre at best. Got a \"mild cafe latte\".",
    "score": 2,
    "second_floor": "Y",
    lnglat: [139.6953651,35.7116807],
    "link": "https://maps.app.goo.gl/3KVDNzpzYCvdYjKq5"
  },
  "cohaze": {
    "name": "こはぜ珈琲",
    "link": "https://maps.app.goo.gl/Z63KBqERuymE6nyF8",
    "score": 3,
    "notes": "Good coffee!",
    lnglat: [139.665275,35.66346071],
    "visited": "1 April 2025"
  },
  "asahi_cafe_au_lait": {
    "name": "Asahi BOSS Canned Cafe Au Lait",
    "score": 1,
    "notes": "Bad. Cafe au lait.",
    "visited": "???"
  },
  "tkdnbb_mtsrb": {
    "name": "道しるべCafe",
    "visited": "12 April 2025",
    "score": 3,
    lnglat: [139.7031115,35.7135989],
    "link": "https://maps.app.goo.gl/g9dk22ycX7qaxxrj8"
  },
  "kuroneko": {
    "name": "黒猫亭",
    "score": 5,
    "notes": "Wonderful ambience. Themed around the '70s novel series of the same name.",
    "visited": "2 May 2025",
    lnglat: [139.7988033,35.7133324],
    "link": "https://maps.app.goo.gl/XFq187xpyavAuXER9"
  },
  "flying_scotsman": {
    "name": "Flying Scotsman",
    "score": 2,
    "notes": "Good pancakes, albeit a little over-the-top.",
    "visited": "14 May 2025",
    lnglat: [139.7694218,35.7002386],
    "link": "https://maps.app.goo.gl/eiVXa6eEnHm78VyE6"
  },
  "daisy_nishishinjuku": {
    "visited": "29 May 2025",
    "name": "DAISY Nishi-Shinjuku",
    "score": 2,
    lnglat: [139.6906791,35.6945326],
    "link": "https://maps.app.goo.gl/FmHZFzCrw4TP12io9"
  },
  "latte_art_mania": {
    "name": "LATTE ART MANIA TOKYO",
    "visited": "30 May 2025",
    "score": 4,
    "notes": "Cofermented with strawberries. Tasty latte.",
    lnglat: [139.7116123,35.6711983],
    "link": "https://maps.app.goo.gl/mx1MkLi7z8Q1tBMc9"
  },
  "kohikan": {
    "name": "珈琲館銀座中央通り",
    "score": 3,
    "notes": "Charcoal-roasted cafe au lait.",
    lnglat: [139.7650092,35.6732952],
    "link": "https://maps.app.goo.gl/yyut2qPtQAazMSSG7"
  },
  "variety": {
    "visited": "28 June 2025",
    "score": 2,
    "link": "https://maps.app.goo.gl/QP6ukBKBdCMWXT3a7",
    lnglat: [-73.9936496,40.7463294],
  },
  "mafumi": {
    "visited": "3 July 2025",
    "score": 4,
    "notes": "Cafe au lait, phenomenal desserts.",
    "link": "https://maps.app.goo.gl/o6oFgYXGhTZhEH5H9",
    lnglat: [139.7569021,35.6973831],
  },
  "roastery_nozy": {
    name: "THE ROASTERY BY NOZY COFFEE",
    "visited": "5 July 2025",
    "score": 2,
    "notes": "Served me an espresso shot in a champagne glass.",
    "link": "https://maps.app.goo.gl/MKdmaE5SNsPkHY8ZA",
    "lnglat": [139.7047658,35.6655724],
  },
  "tenpura": {
    name: "天ぷら 阿部 銀座本店",
    "visited": "11 July 2025",
    "score": 3,
    "link": "https://maps.app.goo.gl/EuyWn7Woe4v2imVS7",
    "notes": "Not a coffee shop. Served as part of dessert. Iced coffee.",
    "lnglat": [139.7569024, 35.6661186],
  },
  "dandelion": {
    "name": "Dandelion Kaffe",
    "score": 4,
    "notes": "Brand-new. Great shop!",
    "link": "https://maps.app.goo.gl/g8SAavs56CpiSehu6",
    lnglat: [-122.2403106,37.7674684],
  }
};

// It works, okay. Don't bother me for generating this programmatically.
const scoreToColor = {
  1: "#db3347",
  2: '#de7531',
  3: '#e1cf30',
  4: '#99e32e',
  5: '#3ce62d',
}

function init() {
  const map = new maplibregl.Map({
    style: 'https://tiles.openfreemap.org/styles/liberty',
    center: [139.76, 35.665],
    zoom: 10,
    container: 'map',
    hash: true,
  })
  map.addControl(new maplibregl.FullscreenControl());

  Object.entries(coffee).forEach(([key, { name, score, link, notes, visited, lnglat }]) => {
    if (!lnglat) {
      return;
    }

    const popup = new maplibregl.Popup()
        .setHTML(`<div class='coffeemapmarker'><h1>${name}</h1><ul><li>Visited: ${visited}</li><li>Score: ${score}</li><li>Link: ${link}</li><li>Notes: ${notes}</li></ul></div>`)
        .addClassName("coffeemapmarker")
    new maplibregl.Marker({
        color: score ? scoreToColor[score] : undefined,
      })
      .setLngLat(lnglat)
      .setPopup(popup)
      .addTo(map);
  })
}

init();

